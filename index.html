<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Tetris Online</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üéÆ TETRIS ONLINE</h1>
            <div class="status-bar">
                <div class="status-item">
                    <span class="label">Score:</span>
                    <span id="score" class="value">0</span>
                </div>
                <div class="status-item" id="time-container" style="display: none;">
                    <span class="label">‚è± Time:</span>
                    <span id="time-left" class="value">0</span>
                    <span class="label">/</span>
                    <span id="time-limit" class="value">0</span>
                </div>
                <div class="status-item">
                    <span class="label">Status:</span>
                    <span id="connection-status" class="value disconnected">Disconnected</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Login/Register Panel -->
            <div id="auth-panel" class="panel">
                <div class="auth-container">
                    <h2>ƒêƒÉng Nh·∫≠p / ƒêƒÉng K√Ω</h2>
                    <div class="auth-tabs">
                        <button class="tab-btn active" onclick="switchTab('login')">ƒêƒÉng Nh·∫≠p</button>
                        <button class="tab-btn" onclick="switchTab('register')">ƒêƒÉng K√Ω</button>
                    </div>
                    <div id="login-form" class="auth-form">
                        <input type="text" id="login-username" placeholder="Username" />
                        <input type="password" id="login-password" placeholder="Password" />
                        <button onclick="handleLogin()">ƒêƒÉng Nh·∫≠p</button>
                    </div>
                    <div id="register-form" class="auth-form" style="display: none;">
                        <input type="text" id="register-username" placeholder="Username" />
                        <input type="password" id="register-password" placeholder="Password" />
                        <button onclick="handleRegister()">ƒêƒÉng K√Ω</button>
                    </div>
                    <div id="auth-message" class="message"></div>
                </div>
            </div>

            <!-- Lobby Panel -->
            <div id="lobby-panel" class="panel" style="display: none;">
                <div class="lobby-header">
                    <h2>Lobby</h2>
                    <div class="user-info">
                        <span class="username-display">üë§ <span id="current-username-display"></span></span>
                        <button onclick="handleLogout()" class="logout-btn">üö™ ƒêƒÉng Xu·∫•t</button>
                    </div>
                </div>
                <div class="lobby-controls">
                    <button onclick="listRooms()">üìã Danh S√°ch Ph√≤ng</button>
                    <button onclick="createRoom()">‚ûï T·∫°o Ph√≤ng</button>
                    <button onclick="viewHistory()">üìú L·ªãch S·ª≠</button>
                    <button onclick="viewRecords()">üèÜ K·ª∑ L·ª•c</button>
                </div>
                <div id="rooms-list" class="rooms-list"></div>
                <div id="room-info" class="room-info" style="display: none;">
                    <h3>Ph√≤ng: <span id="room-id"></span></h3>
                    <div id="players-list" class="players-list"></div>
                    <div class="room-controls">
                        <button id="ready-btn" onclick="toggleReady()">‚úÖ Ready</button>
                        <button onclick="leaveRoom()">üö™ R·ªùi Ph√≤ng</button>
                    </div>
                    <div id="mode-selector" class="mode-selector" style="display: none;">
                        <h4>Ch·ªçn Ch·∫ø ƒê·ªô Ch∆°i:</h4>
                        <button onclick="selectMode(0)">SURVIVAL</button>
                        <button onclick="selectMode(1)">TIME ATTACK 60s</button>
                        <button onclick="selectMode(2)">TIME ATTACK 180s</button>
                        <button onclick="selectMode(3)">TIME ATTACK 300s</button>
                    </div>
                </div>
            </div>

            <!-- Game Panel -->
            <div id="game-panel" class="panel" style="display: none;">
                <div class="game-container">
                    <div class="game-left">
                        <canvas id="game-board" width="300" height="600"></canvas>
                        <div class="game-controls-hint">
                            <p>ƒêi·ªÅu khi·ªÉn: ‚Üê ‚Üí (di chuy·ªÉn), ‚Üì (r∆°i nhanh), ‚Üë (xoay), Q (tho√°t)</p>
                        </div>
                    </div>
                    <div class="game-right">
                        <div class="leaderboard">
                            <h3>üèÜ B·∫£ng X·∫øp H·∫°ng</h3>
                            <div id="leaderboard-content" class="leaderboard-content">
                                <p class="waiting">ƒêang ch·ªù ƒëi·ªÉm s·ªë...</p>
                            </div>
                        </div>
                        <div class="next-piece">
                            <h3>Ti·∫øp Theo</h3>
                            <canvas id="next-piece-canvas" width="120" height="120"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Game Over Panel -->
            <div id="gameover-panel" class="panel" style="display: none;">
                <div class="gameover-content">
                    <h2>üéâ K·∫øt Qu·∫£ Tr·∫≠n ƒê·∫•u</h2>
                    <div class="final-score">
                        <p>ƒêi·ªÉm c·ªßa b·∫°n: <span id="final-score" class="score-value">0</span></p>
                    </div>
                    <div id="final-results" class="final-results"></div>
                    <button onclick="returnToLobby()">Quay L·∫°i Lobby</button>
                </div>
            </div>
        </div>

            <!-- Messages -->
            <div id="message-container" class="message-container"></div>
        </div>

        <!-- History Modal -->
        <div id="history-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üìú L·ªãch S·ª≠ Tr·∫≠n ƒê·∫•u</h2>
                    <span class="close" onclick="closeModal('history-modal')">&times;</span>
                </div>
                <div class="modal-body">
                    <div id="history-content"></div>
                </div>
            </div>
        </div>

        <!-- Records Modal -->
        <div id="records-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üèÜ K·ª∑ L·ª•c Ng∆∞·ªùi Ch∆°i</h2>
                    <span class="close" onclick="closeModal('records-modal')">&times;</span>
                </div>
                <div class="modal-body">
                    <div id="records-content"></div>
                </div>
            </div>
        </div>

    <script src="websocket-client.js"></script>
    <script src="game.js"></script>
</body>
</html>

